<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>Calendar</title>
  </head>
  <body>
    <h1>Calendar</h1>
    <a href=<%= "/calendar/#{(@date - 1.month).strftime('%Y/%m')}" %>>前の月</a><br>
    <a href=<%= "/calendar/#{(@date + 1.month).strftime('%Y/%m')}" %>>次の月</a><br>

    <% date = @date %>
    <table>
      <caption><%= date.strftime('%Y年%m月')%></caption>
      <tr>
        <th>月</th>
        <th>火</th>
        <th>水</th>
        <th>木</th>
        <th>金</th>
        <th>土</th>
        <th>日</th>
      </tr>
      <% month = date.strftime('%m')%>
      <% d = date.at_beginning_of_month.at_beginning_of_week%>
      <% 1.upto(5).each do |i|%>
        <tr>
          <% (d..d.end_of_week).each do|c|%>
            <th><%= (c.strftime('%m') == month)? c.strftime('%d'): "  "%></th>
          <% end %>
        </tr>
        <% d = d + 1.week %>
      <% end %>
    </table>
    <br>
    <%= params %>
  </body>
</html>
